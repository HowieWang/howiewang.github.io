---
layout: post
title:  【Howie玩python】-FTPplus加强专业版
category:
-   python

---

* content
{:toc}


> 我觉得我注定是可以写出几个牛逼的项目的！
认真的练习，认真的练习，认真的练习多了，也就成了实战。



## FTPplus的增强的功能

上周写了个简单版的ftp，用到python里的socket实现，这次继续完善，虽然最后还只是个简单版本。

> 完善ftp

[v] 1 断点续传，记录位置，临时文件。再打开时候询问是否继续上传或下载
[v] 2 md5一边写一遍验证
[v] 3 进度条，数字显示
[v] 4 cd 切换会影响所有用户？
[v] 5 用户空间配额
[v] 6 用户认证
[v] 7 多用户同时在线
[v] 8 日志输出


-----------

在n多微信群都在发红包庆祝平安夜的时候，我却敲着键盘写代码，会不会错过了好几个亿？

## 增加和优化内容：

- 命令模式， 客户端启动时候就显示命令帮助，然后通过命令行+文件名的方式进行上传下载。  
- 服务器端执行命令，可以随意一些，但是都限定到固定用户目录下  ，显示列表，增删文件等。
- 上传文件重复，可以选择是否覆盖，下载就无所谓了，因为我就想下载服务器最新的
- 添加md5文件验证，判断文件传递前后的一致性  
- 服务器端添加日志，客户端可以读取日志


## 踩过的坑  

- 路径的中文处理，各种encode，decode都试过了，还是不能把str和unicode灵活转换，处理办法？整个文件夹放到英文路径。ok！  
- str的split时候，要注意分割后的个数和之前相等啊！  
- 路径拼接，默认呢，可以用‘/’，但是检查仔细点，差一个就找不到地方了。还可用os.sep去统一。
- 服务器和客户端有发送有接收，如果卡住了，肯定写重复了！
- 对文件操作前一定要判断是否存在文件啊，比如计算文件大小！


## 使用方法：

server:

- 直接启动，会提示是否建立用户，  
- 输入 “1”，新建用户，后面在客户端可用这个去连接调试。  
- 输入其他任意字符，可以直接启动服务端：  
- 默认用户密码：howie 111     
- 断点续传测试方法：采用的是客户端ctrl+c打断传输，然后保存位置到文件，再次启动客户端，从上次的位置继续传输。

client：

- 启动时候需要 python file.py ip port 这样来启动，否则会提示用法。这样可以方便的连接任何ip的服务端，而不用修改代码
- 可以先用help看看有哪些操作可以使用
- get filename 下载文件
- put filename 上传文件

---
> 人生苦短，python的世界里感谢有你。
